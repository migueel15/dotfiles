#!/bin/bash
DOTFILES_DIR="$HOME/.config/dotfiles"
BIN_DIR="$DOTFILES_DIR/bin"
DISTROS="$BIN_DIR/distros"
CONFIG_DIR="$DOTFILES_DIR/config"

# DISTRO=$(lsb_release -si)
#
# if [ "$DISTRO" = "Arch" ]; then
# 	$DISTROS/archlinux
# fi

sudo pacman -Syy

if [ -z $(which yay) ]; then
	echo "Installing yay"
	sudo pacman -S --noconfirm git
	git clone https://aur.archlinux.org/yay.git /tmp/yay
	cd /tmp/yay
	makepkg -si
else
	echo "yay is already installed"
fi

for script in $CONFIG_DIR/modules/*; do
	BASENAME=$(basename $script)
	export FILES_DIR=$CONFIG_DIR/files/$BASENAME
	echo "Running $script"
	bash $script
done
