#!/bin/bash
source config

# DISTRO=$(lsb_release -si)
#
# if [ "$DISTRO" = "Arch" ]; then
# 	$DISTROS/archlinux
# fi

sudo pacman -Syy

if [ -z $(which yay) ]; then
	echo "Installing yay"
	sudo pacman -S --noconfirm git
	git clone https://aur.archlinux.org/yay.git /tmp/yay
	cd /tmp/yay
	makepkg -si
else
	echo "yay is already installed"
	exit 1
fi

for script in $CONFIG_DIR/modules/*; do
	BASENAME=$(basename $script)
	export FILES_DIR=$CONFIG_DIR/files/$BASENAME
	echo "Running $script"
	bash $script
done
